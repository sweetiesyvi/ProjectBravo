<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pairs! — Memory Game</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/game.css">
</head>
<body class="bg-light">
  <header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary" aria-label="Main navigation">
      <div class="container">
        <a class="navbar-brand" href="#">Pairs! Memory</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain"
                aria-controls="navMain" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navMain">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item"><button id="playBtn" class="btn btn-sm btn-light me-2 mt-2 mt-lg-0">Play / Reset</button></li>
            <li class="nav-item"><a class="nav-link" data-bs-toggle="modal" href="#howToModal" role="button">How to play</a></li>
            <li class="nav-item"><a class="nav-link" id="devProfileLink" href="#dev-profile">Dev Profile</a></li>
          </ul>

          <form id="settingsForm" class="d-flex" novalidate>
            <input id="playerName" name="playerName" class="form-control form-control-sm me-2" placeholder="Your name" required minlength="2" aria-label="Player name">
            <select id="difficulty" name="difficulty" class="form-select form-select-sm me-2" aria-label="Difficulty">
              <option value="easy">Easy (6 pairs)</option>
              <option value="normal" selected>Normal (8 pairs)</option>
              <option value="hard">Hard (12 pairs)</option>
            </select>
            <button class="btn btn-sm btn-outline-light" type="submit">Save</button>
          </form>
        </div>
      </div>
    </nav>
  </header>

  <main class="container my-4">
    <section class="row">
      <aside class="col-lg-4 mb-3" id="controls">
        <div class="card mb-3" aria-labelledby="statusHeading">
          <div class="card-body">
            <h2 id="statusHeading" class="h6">Status</h2>
            <p id="greeting" class="mb-1">Welcome!</p>
            <p class="mb-1">Name: <strong id="displayName">—</strong></p>
            <p class="mb-1">Best Moves: <strong id="bestScore">—</strong></p>
            <p class="mb-1">Moves: <span id="moves">0</span></p>
            <div class="progress" style="height: 14px;" aria-hidden="false">
              <div id="progressBar" class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:0%">0%</div>
            </div>
            <div class="mt-3 d-grid gap-2">
              <button id="resetBtn" class="btn btn-outline-primary">Reset Round</button>
              <button id="shuffleBtn" class="btn btn-outline-secondary">Shuffle</button>
            </div>
          </div>
        </div>

        <div class="card" aria-labelledby="settingsHeading">
          <div class="card-body">
            <h3 id="settingsHeading" class="h6">Settings</h3>
            <form id="settingsPanel" novalidate>
              <div class="mb-2">
                <label for="nameInput" class="form-label">Player name</label>
                <input id="nameInput" name="name" class="form-control" minlength="2" required>
                <div class="invalid-feedback">Please provide at least 2 characters.</div>
              </div>

              <fieldset class="mb-2">
                <legend class="small mb-1">Theme</legend>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="theme" id="themeLight" value="light" checked>
                  <label class="form-check-label" for="themeLight">Light</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="theme" id="themeDark" value="dark">
                  <label class="form-check-label" for="themeDark">Dark</label>
                </div>
              </fieldset>

              <div class="d-grid">
                <button class="btn btn-primary" type="submit">Apply</button>
              </div>
            </form>
          </div>
        </div>
      </aside>

      <section class="col-lg-8" id="gameArea">
        <div class="card mb-3">
          <div class="card-body">
            <h2 class="card-title">Play — Match pairs</h2>
            <p class="card-text">Flip 2 cards at a time. Match all pairs in as few moves as possible.</p>

            <div id="boardWrapper" class="mt-3">
              <!-- board rendered here -->
              <div id="board" class="game-grid" role="grid" aria-live="polite"></div>
            </div>

            <div class="mt-3 d-flex justify-content-between align-items-center">
              <div id="message" class="small text-muted" aria-live="polite"></div>
              <button id="hintBtn" class="btn btn-sm btn-outline-info">Hint</button>
            </div>
          </div>
        </div>
        <div class="mb-3">
          <img src="images/wireframe.svg" alt="Wireframe of game layout" style="max-width:100%; height:auto;">
        </div>
      </section>
    </section>

    <div id="ariaStatus" class="visually-hidden" aria-live="polite"></div>
  </main>

  <footer class="bg-white border-top py-3">
    <div class="container d-flex justify-content-between">
      <div>
        <a id="profileCardLink" href="#dev-profile">Dev Profile</a> |
        <a id="repoLink" href="#" target="_blank" rel="noopener">Game Repo</a> |
        <a id="ghProfile" href="#" target="_blank" rel="noopener">GitHub</a>
      </div>
      <div>
        <a id="nuLink" href="#" target="_blank" rel="noopener">Nu HTML Validator</a> |
        <a id="waveLink" href="#" target="_blank" rel="noopener">WAVE</a>
      </div>
    </div>
  </footer>

  <!-- How to modal -->
  <div class="modal fade" id="howToModal" tabindex="-1" aria-labelledby="howToLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 id="howToLabel" class="modal-title">How to play</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ol>
            <li>Set your name & difficulty in the navbar or settings.</li>
            <li>Click Play / Reset to start a round.</li>
            <li>Click two cards to try to match them. Matched pairs stay revealed.</li>
            <li>Finish all pairs. Your moves are recorded and the best score persists.</li>
          </ol>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import Game from './scripts/game.js';
    const app = new Game({
      selectors: {
        board: '#board',
        displayName: '#displayName',
        moves: '#moves',
        bestScore: '#bestScore',
        progressBar: '#progressBar',
        message: '#message',
        greeting: '#greeting',
        repoLink: '#repoLink',
        ghProfile: '#ghProfile',
        nuLink: '#nuLink',
        waveLink: '#waveLink'
      }
    });
    window.app = app; // accessible for debugging
    // Easter egg hint
    console.log('%cHint: call window.unlockSecret() to toggle a secret theme!', 'color: teal; font-weight:600;');
    window.unlockSecret = () => app.toggleSecretTheme();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
